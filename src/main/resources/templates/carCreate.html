<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create New Car</title>
</head>
<body>
<h1>Create New Car</h1>
<form th:action="@{/carCreate}" th:object="${carDto}" method="post">

    <div>
        <label>Name:</label>
        <input type="text" th:field="*{name}" placeholder="Enter car name"/>
        <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
    </div>

    <div>
        <label>YouTube Link:</label>
        <input type="text" th:field="*{youtubeLink}" placeholder="Enter YouTube video link"/>
        <span th:if="${#fields.hasErrors('youtubeLink')}" th:errors="*{youtubeLink}"></span>
    </div>

    <div>
        <label>Price:</label>
        <input type="number" th:field="*{price}" placeholder="Enter price"/>
        <span th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></span>
    </div>

    <div>
        <label>Fuel Type:</label>
        <input type="text" th:field="*{fuelType}" placeholder="Enter fuel type"/>
        <span th:if="${#fields.hasErrors('fuelType')}" th:errors="*{fuelType}"></span>
    </div>

    <div>
        <label>Production Year:</label>
        <!-- Keep only th:field; remove th:value to avoid conflicts -->
        <input type="date" th:field="*{productionYear}" placeholder="Select production year"/>
        <span th:if="${#fields.hasErrors('productionYear')}" th:errors="*{productionYear}"></span>
    </div>

    <div>
        <label>Engine Size:</label>
        <input type="text" th:field="*{engineSize}" placeholder="Enter engine size"/>
        <span th:if="${#fields.hasErrors('engineSize')}" th:errors="*{engineSize}"></span>
    </div>

    <div>
        <label>Seat:</label>
        <input type="number" th:field="*{seat}" placeholder="Enter number of seats"/>
        <span th:if="${#fields.hasErrors('seat')}" th:errors="*{seat}"></span>
    </div>

    <div>
        <label>Door:</label>
        <input type="number" th:field="*{door}" placeholder="Enter number of doors"/>
        <span th:if="${#fields.hasErrors('door')}" th:errors="*{door}"></span>
    </div>

    <div>
        <label>Warranty:</label>
        <input type="text" th:field="*{warranty}" placeholder="Enter warranty info"/>
        <span th:if="${#fields.hasErrors('warranty')}" th:errors="*{warranty}"></span>
    </div>

    <div>
        <label>Transmission:</label>
        <input type="text" th:field="*{transmission}" placeholder="Enter transmission type"/>
        <span th:if="${#fields.hasErrors('transmission')}" th:errors="*{transmission}"></span>
    </div>

    <div>
        <label>Drive Type:</label>
        <input type="text" th:field="*{driveType}" placeholder="Enter drive type"/>
        <span th:if="${#fields.hasErrors('driveType')}" th:errors="*{driveType}"></span>
    </div>

    <div>
        <label>Color:</label>
        <input type="text" th:field="*{color}" placeholder="Enter car color"/>
        <span th:if="${#fields.hasErrors('color')}" th:errors="*{color}"></span>
    </div>

    <div>
        <label>Car Type:</label>
        <select th:field="*{carTypeId}">
            <option value="" disabled selected>-- Select car type --</option>
            <option th:each="t : ${carTypes}" th:value="${t.typeId}" th:text="${t.typeName}"></option>
        </select>
        <span th:if="${#fields.hasErrors('carTypeId')}" th:errors="*{carTypeId}"></span>
    </div>
    <div>
    <label>Features:</label>
    <div th:each="f : ${allFeatures}">
        <label>
            <input type="checkbox" th:field="*{featureIds}" th:value="${f.id}" />
            <span th:text="${f.name}">Feature</span>
        </label>
    </div>
</div>

    <!-- ✅ Added Brand select block -->
    <div>
        <label>Brand:</label>
        <select th:field="*{brandId}" required>
            <option value="" disabled th:selected="${carDto.brandId == null}">-- Select brand --</option>
            <option th:each="b : ${carBrands}" th:value="${b.brandId}" th:text="${b.brandName}"></option>
        </select>
        <span th:if="${#fields.hasErrors('brandId')}" th:errors="*{brandId}"></span>
    </div>
    <!-- ✅ End Brand select block -->

    <div>
        <label>Description:</label>
        <textarea th:field="*{description}" placeholder="Enter description"></textarea>
        <span th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></span>
    </div>

    <div>
        <button type="submit">Create</button>
        <a th:href="@{/cars}"><button type="button">Cancel</button></a>
    </div>

</form>
</body>
</html>
