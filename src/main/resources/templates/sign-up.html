<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Register | Autowise</title>
    <style>
        :root {
            --brand:#f7b500; --ink:#111319; --muted:#838792; --bg:#ffffff; --panel:#f7f8fb;
            --shadow:0 20px 60px rgba(17,19,25,0.08); --radius:18px;
        }
        *{box-sizing:border-box}
        body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
        .hero{background:#2f3038;color:#fff;padding:48px 20px}
        .hero h1{margin:0;font-size:42px}
        .crumbs{margin-top:8px;font-size:14px;color:#cfd2da}
        .wrap{max-width:1040px;margin:0 auto;padding:0 20px}
        .auth{display:grid;place-items:center;padding:56px 20px 80px}
        .card{width:100%;max-width:520px;background:var(--panel);border-radius:var(--radius);box-shadow:var(--shadow);padding:28px}
        .card h2{margin:0 0 18px;text-align:center;font-size:28px}
        .field{margin-bottom:14px}
        .field input, .field select{
            width:100%;height:48px;border-radius:12px;border:1px solid #dde1ea;background:#fff;padding:0 14px;font-size:15px;outline:none
        }
        .field input:focus, .field select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(247,181,0,0.15)}
        .errors{background:#ffe8e8;color:#7a0000;border:1px solid #ffc9c9;border-radius:10px;padding:10px 12px;margin-bottom:14px;font-size:14px}
        .btn{width:100%;height:50px;border:0;border-radius:12px;background:var(--brand);color:#1b1300;font-weight:700;font-size:16px;cursor:pointer}
        .aux{margin-top:14px;text-align:center;font-size:14px;color:var(--muted)}
        .aux a{color:var(--ink);text-decoration:none;font-weight:600}
    </style>
</head>
<body>

<!-- HERO -->
<section class="hero">
    <div class="wrap">
        <h1>REGISTER</h1>
        <div class="crumbs">HOME &nbsp;›&nbsp; REGISTER</div>
    </div>
</section>

<!-- AUTH CARD -->
<section class="auth">
    <div class="card">
        <h2>Create your account as <span id="who">User</span></h2>

        <!-- The th:object MUST wrap everything that uses *{...} or #fields -->
        <form method="post" action="/register" th:object="${registerDto}">
            <!-- errors must be inside th:object -->
            <div th:if="${#fields.hasErrors('*')}" class="errors">
                <div th:each="e : ${#fields.errors('*')}" th:text="${e}">Validation error</div>
            </div>

            <!-- role selection -->
            <div class="seg">
                <input type="radio" id="asUser"  th:field="*{role}" value="USER" checked>
                <label for="asUser">User</label>
                <input type="radio" id="asAdmin" th:field="*{role}" value="ADMIN">
                <label for="asAdmin">Admin</label>
            </div>

            <div class="field"><input th:field="*{name}" placeholder="Full name..." required></div>
            <div class="field"><input th:field="*{email}" type="email" placeholder="Email..." required></div>
            <div class="field"><input th:field="*{password}" type="password" placeholder="Password..." required></div>
            <div class="field"><input th:field="*{confirmPassword}" type="password" placeholder="Confirm password..." required></div>

            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button class="btn" type="submit">Create Account →</button>
        </form>

        <div class="aux">
            Already have an account?
            <a th:href="@{/login}">Sign in</a>
        </div>
    </div>
</section>

<script>
    // Optional: live title swap
    const who = document.getElementById('who');
    document.addEventListener('change', (e) => {
        if (e.target.id === 'asUser' && e.target.checked) who.textContent = 'User';
        if (e.target.id === 'asAdmin' && e.target.checked) who.textContent = 'Admin';
    });
</script></body>
</html>
